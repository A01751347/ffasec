import{j as e,m as n,r,D as y}from"./index-CoLLSTFM.js";import{H as u}from"./Header-x-afj402.js";import{S as c}from"./StatCard-CmT1tdfT.js";import{F as j}from"./file-text-3hiu_sto.js";import{P as f}from"./package-Dn0HgtBw.js";import{C as b}from"./calendar-Dmtvk1k8.js";const N=({orders:a})=>e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(s=>{var t;return e.jsxs(n.div,{className:"bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{className:"text-blue-400",size:28}),e.jsxs("h3",{className:"text-xl font-semibold text-gray-100",children:["Orden #",s.number]})]}),e.jsxs("p",{className:"text-gray-300 mt-2",children:[e.jsx("strong",{children:"Ticket:"})," ",s.ticket]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Cliente:"})," ",s.name]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Total:"})," $",((t=s.total)==null?void 0:t.toFixed(2))||"0.00"]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{children:"Fecha:"})," ",s.date]})]},s.number)}):e.jsx("p",{className:"text-gray-400 text-center col-span-full",children:"No hay Ã³rdenes para esta fecha."})});function v(){const[a,s]=r.useState([]);return r.useEffect(()=>{fetch("/api/files").then(t=>t.json()).then(t=>{s(t.files||[])}).catch(t=>console.error(t))},[]),e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h1",{children:"Archivos en uploads:"}),e.jsx("ul",{children:a.map(t=>e.jsx("li",{children:e.jsx("a",{href:`/api/files/download/${t}`,download:!0,children:t})},t))})]})}const w=()=>new Date().toISOString().split("T")[0],P=()=>{const[a,s]=r.useState(w()),[t,d]=r.useState(0),[x,m]=r.useState(0),[p,h]=r.useState([]);return r.useEffect(()=>{const i=async()=>{try{const l=await(await fetch(`/api/dailyReport?date=${a}`)).json();d(l.total_money||0),m(l.total_pieces||0)}catch(o){console.error("Error fetching daily report:",o)}},g=async()=>{try{const l=await(await fetch(`/api/orders/byDate?date=${a}`)).json();h(l)}catch(o){console.error("Error fetching orders:",o)}};i(),g()},[a]),e.jsxs("div",{className:"flex-1 overflow-auto relative z-10",children:[e.jsx(u,{title:"Reporte Diario"}),e.jsxs("main",{className:"max-w-7xl mx-auto py-6 px-4 lg:px-8 xl:px-12",children:[e.jsx(n.div,{className:"flex flex-col sm:flex-row gap-4 mb-4 bg-gray-800 bg-opacity-50 backdrop-blur-md shadow-lg rounded-xl p-6 border border-gray-700",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-gray-100 block mb-1",children:"Fecha:"}),e.jsx("input",{type:"date",value:a,onChange:i=>s(i.target.value),className:"w-full border p-2 rounded bg-gray-700 text-white"})]})}),e.jsxs(n.div,{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1},children:[e.jsx(c,{name:"Total Vendido",icon:y,value:`$${Number(t).toFixed(2)}`,color:"#6366f1"}),e.jsx(c,{name:"Total Piezas",icon:f,value:x,color:"#8B5CF6"}),e.jsx(c,{name:"Fecha",icon:b,value:a,color:"#6366f1"})]}),e.jsx(N,{orders:p}),e.jsx(v,{})]})]})};export{P as default};
