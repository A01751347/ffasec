import{c as U,j as e,m as R,r as L,X as B,u as _,L as G,D as O,C as W}from"./index-CoLLSTFM.js";import{u as X}from"./useApi-CoBdRkS4.js";import{H as Z}from"./Header-x-afj402.js";import{S as $}from"./StatCard-CmT1tdfT.js";import{P as J}from"./package-Dn0HgtBw.js";import{U as K}from"./users-97-kWeZi.js";import{C as Q}from"./calendar-Dmtvk1k8.js";import{T as Y}from"./trending-up-BZmL-0eJ.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ee=U("ChevronDown",q),se=({username:l,notifications:i})=>e.jsx(R.div,{className:"bg-gray-900 bg-opacity-50 backdrop-blur-md overflow-hidden shadow-lg rounded-xl border border-gray-700 p-4",whileHover:{y:-5,boxShadow:"0 25px 50px -12px rgba(0,0,0,0.5)"},children:e.jsxs("div",{className:"px-4 py-5",children:[e.jsxs("p",{className:"text-xl text-gray-100 font-bold",children:["¡Bienvenid@ ",l||"usuario","!"]}),i&&e.jsxs("p",{className:"mt-1 text-sm text-gray-300",children:["Tienes ",i," notificaciones pendientes."]})]})}),k=({children:l,title:i=null,subtitle:a=null,icon:m=null,footer:s=null,className:d="",bodyClassName:p="",headerClassName:u="",footerClassName:o="",animate:x=!0,onClick:t=null,...n})=>{const h=`
    
    bg-gray-800 
    bg-opacity-50 
    backdrop-blur-md 
    shadow-lg 
    rounded-xl 
    border 
    border-gray-700 
    overflow-hidden
  
    ${t?"cursor-pointer hover:border-gray-500 transition-colors":""}
    ${d}
  `,g=e.jsxs(e.Fragment,{children:[(i||a||m)&&e.jsx("div",{className:`px-4 py-5 sm:p-6 border-b border-gray-700 ${u}`,children:e.jsxs("div",{className:"flex items-center",children:[m&&e.jsx("div",{className:"mr-3 text-gray-400",children:m}),e.jsxs("div",{children:[i&&e.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:i}),a&&e.jsx("p",{className:"mt-1 text-sm text-gray-400",children:a})]})]})}),e.jsx("div",{className:`px-4 py-5 sm:p-6 ${p}`,children:l}),s&&e.jsx("div",{className:`px-4 py-4 sm:px-6 border-t border-gray-700 ${o}`,children:s})]});return x?e.jsx(R.div,{className:h,whileHover:{y:t?-5:0,boxShadow:t?"0 25px 50px -12px rgba(0,0,0,0.5)":""},onClick:t,...n,children:g}):e.jsx("div",{className:h,onClick:t,...n,children:g})},V=L.forwardRef(({label:l="",id:i,name:a,value:m,onChange:s,onBlur:d,placeholder:p="Seleccionar...",options:u=[],error:o=null,helperText:x="",disabled:t=!1,required:n=!1,className:y="",labelClassName:h="",selectClassName:g="",fullWidth:j=!0,showEmptyOption:N=!0,emptyOptionText:v="Seleccionar...",optionLabelKey:w="label",optionValueKey:C="value",...T},S)=>{const f=i||`select-${a}-${Math.random().toString(36).substr(2,9)}`,c=`
    
    bg-gray-700 
    text-white 
    border
    focus:ring-2 
    focus:outline-none
    transition
    duration-200
    rounded-md
    appearance-none
  
    ${o?"border-red-500 focus:border-red-500 focus:ring-red-500/30":"border-gray-600 focus:border-blue-500 focus:ring-blue-500/30"}
    ${t?"opacity-60 cursor-not-allowed":""}
    ${j?"w-full":""}
    p-2.5 pr-10
    ${g}
  `;return e.jsxs("div",{className:`mb-4 ${j?"w-full":""} ${y}`,children:[l&&e.jsxs("label",{htmlFor:f,className:`block mb-2 text-sm font-medium text-gray-300 ${h}`,children:[l,n&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{ref:S,id:f,name:a,value:m,onChange:s,onBlur:d,disabled:t,required:n,className:c,...T,children:[N&&e.jsx("option",{value:"",disabled:n,children:v}),u.map((b,H)=>{const I=typeof b=="object"?b[C]:b,M=typeof b=="object"?b[w]:b;return e.jsx("option",{value:I,children:M},H)})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400",children:e.jsx(ee,{size:18})})]}),(o||x)&&e.jsx("p",{className:`mt-1 text-sm ${o?"text-red-500":"text-gray-400"}`,children:o||x})]})});V.displayName="Select";const z={primary:"bg-blue-100 text-blue-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",danger:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800",info:"bg-indigo-100 text-indigo-800","solid-primary":"bg-blue-500 text-white","solid-secondary":"bg-gray-600 text-white","solid-success":"bg-green-500 text-white","solid-danger":"bg-red-500 text-white","solid-warning":"bg-yellow-500 text-white","solid-info":"bg-indigo-500 text-white","outline-primary":"bg-transparent border border-blue-500 text-blue-500","outline-secondary":"bg-transparent border border-gray-500 text-gray-500","outline-success":"bg-transparent border border-green-500 text-green-500","outline-danger":"bg-transparent border border-red-500 text-red-500","outline-warning":"bg-transparent border border-yellow-500 text-yellow-500","outline-info":"bg-transparent border border-indigo-500 text-indigo-500"},E={xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2.5 py-1",lg:"text-sm px-3 py-1.5"},A=({children:l,variant:i="primary",size:a="md",rounded:m="full",className:s="",removable:d=!1,onRemove:p=()=>{},icon:u=null,...o})=>{const x={none:"rounded-none",sm:"rounded-sm",md:"rounded",lg:"rounded-lg",full:"rounded-full"},t=`
    inline-flex items-center justify-center
    ${z[i]||z.primary}
    ${E[a]||E.md}
    ${x[m]||x.full}
    font-medium whitespace-nowrap
    ${s}
  `;return e.jsxs("span",{className:t,...o,children:[u&&e.jsx("span",{className:"mr-1",children:u}),l,d&&e.jsx("button",{type:"button",onClick:p,className:"ml-1 -mr-1 hover:bg-opacity-20 hover:bg-black rounded-full focus:outline-none","aria-label":"Remove",children:e.jsx(B,{size:14})})]})},ce=()=>{var g,j,N,v,w,C,T,S,f,D,F,P;const{user:l,showNotification:i}=_(),[a,m]=L.useState("año"),{data:s,isLoading:d,error:p,refetch:u}=X(a),o=[{value:"semana",label:"Última semana"},{value:"mes",label:"Último mes"},{value:"trimestre",label:"Último trimestre"},{value:"año",label:"Último año"}],x=r=>r==null||isNaN(parseFloat(r))?"0.00":parseFloat(r).toFixed(2),t=r=>{if(r==null)return"0.00";if(typeof r=="string"){const c=parseFloat(r);return isNaN(c)?"0.00":c.toFixed(2)}return typeof r=="number"?r.toFixed(2):"0.00"},n=L.useMemo(()=>{if(!s||!s.current)return{orders:0,averageTicket:0,customers:0,pieces:0,ordersTrend:0,averageTicketTrend:0,customersTrend:0,piecesTrend:0};const{current:r={},trends:c={}}=s;return{orders:r.orders||0,averageTicket:r.averageTicket||0,customers:r.customers||0,pieces:r.pieces||0,ordersTrend:c.orders||0,averageTicketTrend:c.averageTicket||0,customersTrend:c.customers||0,piecesTrend:c.pieces||0}},[s]),y=r=>{m(r.target.value)},h=()=>{u(),i("Actualizando datos...","info")};return e.jsxs("div",{className:"flex-1 overflow-auto relative z-10",children:[e.jsx(Z,{title:"Dashboard General"}),e.jsxs("main",{className:"max-w-7xl mx-auto py-6 px-4 lg:px-8 xl:px-12",children:[e.jsxs(k,{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center",children:[e.jsxs("div",{className:"mb-4 sm:mb-0",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-100",children:"Resumen de Estadísticas"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Visualice los datos clave del negocio en el período seleccionado"})]}),e.jsx("div",{className:"w-full sm:w-64",children:e.jsx(V,{options:o,value:a,onChange:y,label:"Selecciona el período",fullWidth:!0})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(A,{variant:"solid-primary",size:"md",children:((g=o.find(r=>r.value===a))==null?void 0:g.label)||"Período personalizado"})})]}),p&&e.jsx(k,{className:"mb-6",variant:"danger",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg text-red-400 mb-2",children:"Error al cargar datos"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:p.message}),e.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Reintentar"})]})}),d?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(G,{})}):e.jsxs(R.div,{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1},children:[e.jsx($,{name:"Órdenes Totales",icon:J,value:n.orders,color:"#efefef",trend:t(n.ordersTrend),time:a,isLoading:d}),e.jsx($,{name:"Ticket Promedio",icon:O,type:"Money",value:x(n.averageTicket),color:"#efefef",trend:t(n.averageTicketTrend),time:a,isLoading:d}),e.jsx($,{name:"Clientes Distintos",icon:K,value:n.customers,color:"#efefef",trend:t(n.customersTrend),time:a,isLoading:d}),e.jsx($,{name:"Total de Prendas",icon:W,value:n.pieces,color:"#efefef",trend:t(n.piecesTrend),time:a,isLoading:d})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 mb-8",children:[e.jsx(se,{username:(l==null?void 0:l.username)||"Administrador"}),e.jsx(k,{title:"Fecha Actual",icon:e.jsx(Q,{className:"text-blue-400"}),subtitle:"Información del sistema",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date().toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Hora:"})," ",new Date().toLocaleTimeString()]}),e.jsxs("p",{className:"text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Período activo:"})," ",(j=o.find(r=>r.value===a))==null?void 0:j.label]})]})})]}),e.jsx(k,{title:"Tendencias y Estadísticas",icon:e.jsx(Y,{className:"text-green-400"}),subtitle:"Datos comparativos",className:"mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-100 mb-3",children:"Comparativa de Períodos"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Órdenes actuales:"}),e.jsx("span",{className:"font-medium text-white",children:((N=s==null?void 0:s.current)==null?void 0:N.orders)||0})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Órdenes período anterior:"}),e.jsx("span",{className:"font-medium text-white",children:((v=s==null?void 0:s.previous)==null?void 0:v.orders)||0})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Cambio porcentual:"}),e.jsxs(A,{variant:(((w=s==null?void 0:s.trends)==null?void 0:w.orders)||0)>=0?"solid-success":"solid-danger",children:[(((C=s==null?void 0:s.trends)==null?void 0:C.orders)||0)>=0?"+":"",t((T=s==null?void 0:s.trends)==null?void 0:T.orders),"%"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-100 mb-3",children:"Métricas de Clientes"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Clientes actuales:"}),e.jsx("span",{className:"font-medium text-white",children:((S=s==null?void 0:s.current)==null?void 0:S.customers)||0})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Clientes período anterior:"}),e.jsx("span",{className:"font-medium text-white",children:((f=s==null?void 0:s.previous)==null?void 0:f.customers)||0})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Cambio porcentual:"}),e.jsxs(A,{variant:(((D=s==null?void 0:s.trends)==null?void 0:D.customers)||0)>=0?"solid-success":"solid-danger",children:[(((F=s==null?void 0:s.trends)==null?void 0:F.customers)||0)>=0?"+":"",t((P=s==null?void 0:s.trends)==null?void 0:P.customers),"%"]})]})]})]})]})})]})]})};export{ce as default};
